<!doctype html> <html lang=en> <head> <meta charset=utf-8> <link rel=stylesheet href='/css/250adbc.css'> <title>git reset using Mercurial | David Nadlinger</title> <meta name=viewport content="width=device-width; initial-scale=1.0"> <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML'></script> <link rel="openid.server" href="http://openid.klickverbot.at/"/> <link rel="openid2.provider" href="http://openid.klickverbot.at/"/> </head> <body> <header id=main_header> <h1><span><a href="/">David Nadlinger</a></span></h1> <nav role=navigation> <ul> <li><a href="/blog">Blog</a></li> <li><a href="/code">Code</a></li> <li><a href="/about">About</a></li> </ul> </nav> </header> <div role=main id=main_content> <article class=blog-post> <header> <h1><a href="/blog/2011/01/git-reset-using-mercurial/">git reset using Mercurial</a></h1> <section class=metadata> on <time datetime="2011-01-09T00:00:00-05:00">09 Jan 2011</time> </section> <ul class=pagenav> <li><a href="/blog/2010/12/swig-d-breaking-name-changes/">Older</a></li> <li><a href="/blog/2011/02/swig-2-0-2-with-d-support-released/">Newer</a></li> </ul> </header> <div class=content> I am mainly a "Git":http://git-scm.com user, but lately I have been working with "Mercurial":http://mercurial.selenic.com/ from time to time. I have been mostly using it for basic committing though, so I still occasionally end up with a commit I did not mean to create like this when performing more advanced operations. But undoing that can't be too hard, right? For example, I recently toyed around with "Mercurial Queues":http://mercurial.selenic.com/wiki/MqExtension to emulate Git's staging area, one of the features that seem trivial, but which you don't want to miss at any cost once you are used to it. Doing so, while being at, let's say, revision @1000@, I accidentally created two changesets, @1001@ and @1002@. Now, how do I get rid of these while still keeping the contents of them in the working copy? Using Git, this would just be @git reset HEAD~2@. But unfortunately, Mercurial seems to make your life somewhat hard in this case, this is what I came up with (please leave me a message in the comments in case I missed an easier way): <figure class=code> <div class=highlight><pre>hg update -r1000
</pre></div></figure> This sets the working copy to the last »good« revision, only to … <figure class=code> <div class=highlight><pre>hg revert --all -r1002
</pre></div></figure> … bring the changes from the two commits back to the working copy (but without committing them this time), so we can now … <figure class=code> <div class=highlight><pre>hg strip --force 1001
</pre></div></figure> … strip the two changesets from the history. I am perfectly aware of the fact that any other SCM tool will probably seem clumsy at first if I am used to Git (besides the fact that Git seems to be a natural fit for the way I think about versioning), but I still wonder whether there a deeper reason for Mercurial not to support this more directly. <footer> Like what you read? <a href="http://twitter.com/?status=@dnadlinger:">Let me know</a> what you think or <a href="http://twitter.com/?status=Just read »git reset using Mercurial« by @dnadlinger: http://klickverbot.at/blog/2011/01/git-reset-using-mercurial/">share the article</a> on Twitter. Also, there is more on <a href="/blog/tags/Git/" title="View all posts tagged with »Git«" rel=tag>Git</a>. </footer> </div> </article> </div> <footer id=main_footer> <ul> <li><a class=twitter href="//twitter.com/dnadlinger">Follow me on Twitter</a></li> <li><a class=mail href="/about">Contact me</a></li> <li><a class=rss href="/blog/atom.xml">Blog feed</a></li> </ul> </footer> </body> </html>