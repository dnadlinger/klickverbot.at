<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>thrift.util.resource_pool</title>
  <link href="css/docstyle.css" rel="stylesheet" type="text/css"/>
  <!-- no favicon -->
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/utilities.js"></script>
  <script type="text/javascript" src="js/symbols.js"></script>
  <script type="text/javascript" src="js/modules.js"></script>
  <script type="text/javascript" src="js/quicksearch.js"></script>
  <script type="text/javascript" src="js/navigation.js"></script>
</head>
<body id="thrift.util.resource_pool">
<div id="kandil-content">
<div class="module">
  <h1 class="module" id="m-thrift.util.resource_pool"><a href="htmlsrc/thrift.util.resource_pool.html" class="symbol">thrift.util.resource_pool</a></h1>

<dl>
<dt class="decl"><span class="kw">class</span> <a class="symbol _class" name="TResourcePool" href="htmlsrc/thrift.util.resource_pool.html#L36">TResourcePool</a><span class="tparams">(<em>Resource</em>)</span> <span class="attrs">[<span class="stc">final</span>]</span> <a href="thrift.util.resource_pool.html#TResourcePool" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">A pool of resources, which can be iterated over, and where resources that
 have failed too often can be temporarily disabled.</div></div>
<div class="cmnt">This class is oblivious to the actual resource type managed.</div>
<dl>
<dt class="decl"><a class="symbol _ctor" name="TResourcePool.this" href="htmlsrc/thrift.util.resource_pool.html#L43">this</a><span class="params">(Resource[] <em>resources</em>)</span> <a href="thrift.util.resource_pool.html#TResourcePool.this" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Constructs a new instance.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>resources</em></td><td>The initial members of the pool.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="TResourcePool.add" href="htmlsrc/thrift.util.resource_pool.html#L50">add</a><span class="params">(Resource <em>resource</em>)</span> <a href="thrift.util.resource_pool.html#TResourcePool.add" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Adds a resource to the pool.</div></div></dd>
<dt class="decl"><span class="rettyp">bool</span> <a class="symbol _function" name="TResourcePool.remove" href="htmlsrc/thrift.util.resource_pool.html#L59">remove</a><span class="params">(Resource <em>resource</em>)</span> <a href="thrift.util.resource_pool.html#TResourcePool.remove" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Removes a resource from the pool.</div></div>
<p class="sec_header">Returns:</p><div class="cmnt">Whether the resource could be found in the pool.</div></dd>
<dt class="decl"><span class="kw">struct</span> <a class="symbol _struct" name="TResourcePool.Range" href="htmlsrc/thrift.util.resource_pool.html#L68">Range</a> <a href="thrift.util.resource_pool.html#TResourcePool.Range" class="plink">¶</a></dt>
<dt class="decl"><span class="rettyp">Range</span> <a class="symbol _function" name="TResourcePool.opSlice" href="htmlsrc/thrift.util.resource_pool.html#L198">opSlice</a><span class="params">()</span> <a href="thrift.util.resource_pool.html#TResourcePool.opSlice" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Returns an »enriched« input range to iterate over the pool members.</div></div>
<dl>
<dt class="decl"><span class="rettyp">bool</span> <a class="symbol _function" name="TResourcePool.Range.empty" href="htmlsrc/thrift.util.resource_pool.html#L77">empty</a><span class="params">()</span> <span class="attrs">[<span class="stc">@property</span>]</span> <a href="thrift.util.resource_pool.html#TResourcePool.Range.empty" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Whether the range is empty.</div></div>
<div class="cmnt">This is the case if all members of the pool have been popped (or skipped
 because they were disabled) and TResourcePool.cycle is false, or there
 is no element to return in cycle mode because all have been temporarily
 disabled.</div></dd>
<dt class="decl"><span class="rettyp">Resource</span> <a class="symbol _function" name="TResourcePool.Range.front" href="htmlsrc/thrift.util.resource_pool.html#L128">front</a><span class="params">()</span> <span class="attrs">[<span class="stc">@property</span>]</span> <a href="thrift.util.resource_pool.html#TResourcePool.Range.front" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Returns the first resource in the range.</div></div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="TResourcePool.Range.popFront" href="htmlsrc/thrift.util.resource_pool.html#L139">popFront</a><span class="params">()</span> <a href="thrift.util.resource_pool.html#TResourcePool.Range.popFront" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Removes the first resource from the range.</div></div>
<div class="cmnt">Usually, this is combined with a call to TResourcePool.recordSuccess()
 or recordFault().</div></dd>
<dt class="decl"><span class="rettyp">bool</span> <a class="symbol _function" name="TResourcePool.Range.willBecomeNonempty" href="htmlsrc/thrift.util.resource_pool.html#L155">willBecomeNonempty</a><span class="params">(<span class="k">out</span> Resource <em>next</em>,  <span class="k">out</span> Duration <em>waitTime</em>)</span> <a href="thrift.util.resource_pool.html#TResourcePool.Range.willBecomeNonempty" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Returns whether the range will become non-empty at some point in the
 future, and provides additional information when this will happen and
 what will be the next resource.</div></div>
<div class="cmnt">Makes only sense to call on empty ranges.</div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>next</em></td><td>The next resource that will become available.</td></tr>
<tr><td><em>waitTime</em></td><td>The duration until that resource will become available.</td></tr></table></dd></dl></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="TResourcePool.recordSuccess" href="htmlsrc/thrift.util.resource_pool.html#L210">recordSuccess</a><span class="params">(Resource <em>resource</em>)</span> <a href="thrift.util.resource_pool.html#TResourcePool.recordSuccess" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Records a success for an operation on the given resource, cancelling a
 fault streak, if any.</div></div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="TResourcePool.recordFault" href="htmlsrc/thrift.util.resource_pool.html#L223">recordFault</a><span class="params">(Resource <em>resource</em>)</span> <a href="thrift.util.resource_pool.html#TResourcePool.recordFault" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Records a fault for the given resource.</div></div>
<div class="cmnt">If a resource fails consecutively for more than faultDisableCount times,
 it is temporarily disabled (no longer considered) until
 faultDisableDuration has passed.</div></dd>
<dt class="decl">bool <a class="symbol _variable" name="TResourcePool.permute" href="htmlsrc/thrift.util.resource_pool.html#L246">permute</a> <a href="thrift.util.resource_pool.html#TResourcePool.permute" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Whether to randomly permute the order of the resources in the pool when
 taking a range using opSlice().</div></div>
<div class="cmnt">This can be used e.g. as a simple form of load balancing.</div></dd>
<dt class="decl">bool <a class="symbol _variable" name="TResourcePool.cycle" href="htmlsrc/thrift.util.resource_pool.html#L252">cycle</a> <a href="thrift.util.resource_pool.html#TResourcePool.cycle" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Whether to keep iterating over the pool members after all have been
 returned/have failed once.</div></div></dd>
<dt class="decl">ushort <a class="symbol _variable" name="TResourcePool.faultDisableCount" href="htmlsrc/thrift.util.resource_pool.html#L260">faultDisableCount</a> <a href="thrift.util.resource_pool.html#TResourcePool.faultDisableCount" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">The number of consecutive faults after which a resource is disabled until
 faultDisableDuration has passed. Zero to never disable resources.</div></div>
<div class="cmnt">Defaults to zero.</div></dd>
<dt class="decl">Duration <a class="symbol _variable" name="TResourcePool.faultDisableDuration" href="htmlsrc/thrift.util.resource_pool.html#L268">faultDisableDuration</a> <a href="thrift.util.resource_pool.html#TResourcePool.faultDisableDuration" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">The duration for which a resource is no longer considered after it has
 failed too often.</div></div>
<div class="cmnt">Defaults to one second.</div></dd></dl></dd></dl>
</div>
<div id="kandil-footer">
  <p></p>
  <p>Page generated by <a href="https://github.com/klickverbot/dil">dil</a> on Wed Aug 24 12:37:11 2011.</p>
</div>
</div>
</body>
</html>
